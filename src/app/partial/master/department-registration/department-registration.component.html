<div class="card main-card">
  <div class="card-header pb-0">
    <div class="form-container">
      <form [formGroup]="filterForm">
        <div class="row justify-content-between align-items-center">
          <div class="col-sm-9">
            <div class="row gx-2 align-items-center">
              <div class="col-sm-3">
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label>All Company</mat-label>
                  <mat-select formControlName="companyId">
                    <mat-option *ngFor="let companies of displayCompanyDropdown" value="{{ companies.companyId }}">{{
                      companies.name }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field appearance="legacy" class="w-100">
                  <mat-label>Department Name</mat-label>
                  <input matInput placeholder="Search" formControlName="searchtext" />
                </mat-form-field>
              </div>
              <div class="col-sm-auto">
                <button mat-raised-button (click)="displayData()" [disabled]="!filterForm.value.searchtext">
                  Search
                </button>
              </div>
            </div>
          </div>
          <div class="col-sm-3 text-end">
            <button mat-raised-button class="btn-main" (click)="adddept()">
              <mat-icon>add</mat-icon>
              Add New
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="card-body p-2">
    <div class="table-responsive table-scollar">
      <table mat-table [dataSource]="dataSource" class="w-100 dashboard-table">
        <ng-container matColumnDef="srno">
          <th mat-header-cell *matHeaderCellDef>Sr.No.</th>
          <td mat-cell *matCellDef="let element; let i = index">
            {{(currentPage*10)+i+1}}
          </td>
        </ng-container>

        <ng-container matColumnDef="companyName">
          <th mat-header-cell *matHeaderCellDef>Company Name</th>
          <td mat-cell *matCellDef="let element">{{ element.companyName }}</td>
        </ng-container>

        <ng-container matColumnDef="departmentName">
          <th mat-header-cell *matHeaderCellDef>Department Name</th>
          <td mat-cell *matCellDef="let element">
            {{ element.departmentName }}
          </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let element">
            <!-- <button  mat-icon-button (click)="adddept(element)">
                                <mat-icon>edit</mat-icon>
                            </button> -->

            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu" xPosition="before">
              <button mat-menu-item (click)="adddept(element)">
                <div class="d-flex justify-content-between align-items-center">
                  <span>Edit</span>
                  <mat-icon>edit</mat-icon>
                </div>
              </button>
            </mat-menu>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true;"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>

      <div *ngIf="dataSource?.length==0">
        <div class="alert alert-danger text-center py-2">No Data Found..!</div>
      </div>
    </div>
    <ng-container *ngIf="dataSource?.length!=0">
      <mat-paginator [pageSizeOptions]="[10, 50, 100]" [length]="totalCount" [pageIndex]="currentPage"
        (page)="pageChanged($event)" showFirstLastButtons aria-label="Select page of periodic elements">
      </mat-paginator>
    </ng-container>
  </div>
</div>

<!-- Modal for add new organization -->
<div class="modal fade" id="departmentregistrationmodal" tabindex="-1"
  aria-labelledby="departmentregistrationmodalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <p class="modal-title mb-0" id="departmentregistrationmodalLabel">
          Add New Department
        </p>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <!-- <div class="col-sm-4">
                        <div class="upload-image">
                            <img src="assets/images/user.jpg">
                            <button type="button" class="btn"><i class="fa-solid fa-plus"></i></button>
                            <input type="file" name="myfile" />
                        </div>
                    </div> -->
          <div class="col-sm-12">
            <div class="form-container">
              <!-- <div class="mb-3">
                                <input type="text" class="form-control" placeholder="Organization Name">
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control" placeholder="Contact No.">
                            </div>
                            <div class="mb-3">
                                <input type="email" class="form-control" placeholder="Email ID">
                            </div>
                            <div class="mb-3">
                                <input type="url" class="form-control" placeholder="Website">
                            </div>
                            <div class="mb-3">
                                <textarea class="form-control" placeholder="Address" rows="3"></textarea>
                            </div>
                            <div class="mb-0">
                                <textarea class="form-control" placeholder="About Company" rows="3"></textarea>
                            </div> -->
              <div>
                <select class="form-select mb-3" aria-label="Default select example">
                  <option selected>Company</option>
                  <option value="1">One</option>
                  <option value="2">Two</option>
                  <option value="3">Three</option>
                </select>
              </div>
              <div class="mb-0">
                <input type="text" class="form-control" id="exampleInputDept1" placeholder="Department Name" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <div class="form-container w-100">
          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-outline-main" data-bs-dismiss="modal">
              Cancel
            </button>
            <button type="button" class="btn btn-main">Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>